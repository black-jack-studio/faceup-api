
Fix signup – show real error & stop any DB writes after signUp
	1.	Log l’erreur réelle de Supabase

	•	Dans register.tsx, autour de supabase.auth.signUp(...), catch et log :

try {
  const { data, error } = await supabase.auth.signUp({
    email, password,
    options: { data: { username } }
  });
  if (error) {
    console.error('SIGNUP ERROR', error, error.message, error.status, error.name, error.cause);
    return setToast(error.message || 'Signup failed');
  }
} catch (e:any) {
  console.error('SIGNUP THROW', e, e?.message, e?.status);
  return setToast(e?.message || 'Signup failed');
}

	•	Ouvre DevTools → Network → poste ici le body de POST /auth/v1/signup (status + JSON exact).

	2.	Interdire toute écriture manuelle pendant l’inscription

	•	Cherche et supprime/désactive tout appel/route qui insère dans public.users, game_profiles, inventory, game_stats pendant le signup (ou juste après).
Recherches exactes à faire dans le repo :
	•	insert into public.users
	•	insert into game_profiles
	•	insert into inventory
	•	insert into game_stats
	•	/api/register , /api/signup , prisma.user.create , db.insert(...)
	•	Le seul code autorisé côté client :

await supabase.auth.signUp({ email, password, options:{ data:{ username } } });
// puis redirect, sans autres insertions

	3.	Vérifs rapides côté app (pas SQL)

	•	username est bien passé via options.data.username (pas un autre nom).
	•	Pas de redirection qui déclenche une écriture serveur (ex: un useEffect qui “provisionne” l’utilisateur en base).
	•	Après signUp succès, redirect direct (ex: /profile), sans attendre que le trigger ait fini.

Contexte : côté Supabase on a un trigger auth.users → public.handle_new_auth_user() qui crée les lignes dans public.game_profiles, public.inventory, public.game_stats. Toute écriture manuelle en plus provoque l’erreur sous RLS/contraintes.
Tant que le body de /auth/v1/signup n’est pas 200/201, montre-moi le JSON exact retourné par Supabase (ça dira précisément la colonne/contrainte en cause).
