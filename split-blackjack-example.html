<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack Split Function</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #0a4d3c;
            color: white;
        }
        .game-container {
            background: #1a5d4a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .hands-row {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        .hand {
            background: #2a6d5a;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #4a8d7a;
            min-width: 200px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .hand.active {
            border: 3px solid #ff6b35;
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.5);
        }
        .hand.splitting {
            animation: splitAnimation 0.8s ease-in-out;
        }
        @keyframes splitAnimation {
            0% { transform: translateX(0) scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: translateX(0) scale(1); }
        }
        .hand.split-left {
            animation: slideLeft 0.8s ease-in-out;
        }
        .hand.split-right {
            animation: slideRight 0.8s ease-in-out;
        }
        @keyframes slideLeft {
            0% { transform: translateX(100px); opacity: 0.7; }
            100% { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideRight {
            0% { transform: translateX(-100px); opacity: 0.7; }
            100% { transform: translateX(0); opacity: 1; }
        }
        .card {
            display: inline-block;
            background: white;
            color: black;
            padding: 8px 12px;
            margin: 3px;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
            animation: cardDeal 0.5s ease-out;
        }
        @keyframes cardDeal {
            0% { transform: translateY(-50px) rotate(180deg); opacity: 0; }
            100% { transform: translateY(0) rotate(0deg); opacity: 1; }
        }
        .split-button {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.2s ease;
        }
        .split-button:hover {
            background: #e55a2b;
            transform: scale(1.05);
        }
        .split-button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: scale(1);
        }
        .action-buttons {
            margin: 15px 0;
            text-align: center;
        }
        .hit-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.2s ease;
        }
        .hit-button:hover {
            background: #218838;
            transform: scale(1.05);
        }
        .hit-button.hit-left {
            background: #007bff;
        }
        .hit-button.hit-right {
            background: #6f42c1;
        }
        .deck-info {
            background: #0a3d2c;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
        }
        .hand-controls {
            margin-top: 10px;
        }
        .single-hand {
            justify-content: center;
            max-width: 300px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <h1>üÉè Fonction Split Blackjack</h1>
    
    <div class="game-container">
        <div class="deck-info">
            <strong>Cartes restantes dans le deck:</strong> <span id="deck-count">52</span>
        </div>
        
        <div id="hands-container">
            <!-- Les mains seront affich√©es ici -->
        </div>
        
        <div class="action-buttons">
            <button id="split-button" class="split-button" onclick="handleSplit()">üîÄ SPLIT</button>
            <button class="hit-button" onclick="dealNewHand()">üé¥ Nouvelle Main</button>
        </div>
        
        <div id="split-controls" style="display: none;">
            <h3>Piocher pour chaque main :</h3>
            <button id="hit-left" class="hit-button hit-left" onclick="hitHand(0)">üëà Piocher Main Gauche</button>
            <button id="hit-right" class="hit-button hit-right" onclick="hitHand(1)">üëâ Piocher Main Droite</button>
        </div>
    </div>

    <script>
        // √âtat du jeu
        let gameState = {
            hands: [[]],           // Tableau des mains (commence avec une main vide)
            selectedHandIndex: 0,  // Index de la main actuellement s√©lectionn√©e
            deck: [],             // Deck de cartes
            isSplit: false        // Indique si les mains sont split
        };

        // Fonction pour cr√©er un deck de cartes
        function createDeck() {
            const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
            const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            const deck = [];
            
            for (let suit of suits) {
                for (let value of values) {
                    deck.push({ value, suit, display: value + suit });
                }
            }
            
            // M√©langer le deck
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            
            return deck;
        }

        // Fonction pour v√©rifier si une main peut √™tre split
        function canSplit(hand) {
            // Doit avoir exactement 2 cartes avec la m√™me valeur
            if (hand.length !== 2) return false;
            return hand[0].value === hand[1].value;
        }

        // Fonction principale de split avec animation
        function splitHand(handIndex) {
            const hand = gameState.hands[handIndex];
            
            // V√©rifier si le split est possible
            if (!canSplit(hand)) {
                console.log("Split impossible: pas une paire ou plus de 2 cartes");
                return false;
            }
            
            // V√©rifier qu'il y a assez de cartes dans le deck
            if (gameState.deck.length < 2) {
                console.log("Split impossible: pas assez de cartes dans le deck");
                return false;
            }
            
            // Marquer qu'on va faire un split (pour l'animation)
            const handsContainer = document.getElementById('hands-container');
            handsContainer.querySelector('.hand').classList.add('splitting');
            
            // Attendre un peu pour l'animation, puis effectuer le split
            setTimeout(() => {
                // Cr√©er deux nouvelles mains
                const firstHand = [hand[0], gameState.deck.pop()];   // Premi√®re carte + nouvelle carte
                const secondHand = [hand[1], gameState.deck.pop()];  // Deuxi√®me carte + nouvelle carte
                
                // Remplacer par les deux nouvelles mains
                gameState.hands = [firstHand, secondHand];
                gameState.isSplit = true;
                gameState.selectedHandIndex = 0;
                
                console.log("Split effectu√©!");
                console.log("Main gauche:", firstHand);
                console.log("Main droite:", secondHand);
                
                updateDisplay();
            }, 400);
            
            return true;
        }

        // Fonction pour distribuer une carte √† une main
        function hitHand(handIndex) {
            if (gameState.deck.length === 0) {
                console.log("Plus de cartes dans le deck!");
                return false;
            }
            
            gameState.hands[handIndex].push(gameState.deck.pop());
            console.log(`Carte distribu√©e √† la main ${handIndex}`);
            return true;
        }

        // Gestionnaire d'√©v√©nement pour le bouton Split
        function handleSplit() {
            if (!gameState.isSplit) {
                const success = splitHand(0); // Toujours split la premi√®re main
                if (!success) {
                    updateDisplay(); // Mettre √† jour m√™me si √ßa √©choue pour l'affichage des erreurs
                }
            }
        }

        // Fonction pour distribuer une nouvelle main de d√©part
        function dealNewHand() {
            if (gameState.deck.length < 2) {
                gameState.deck = createDeck();
            }
            
            // R√©initialiser avec une nouvelle main
            gameState.hands = [[gameState.deck.pop(), gameState.deck.pop()]];
            gameState.selectedHandIndex = 0;
            gameState.isSplit = false;
            
            updateDisplay();
        }

        // Fonction pour mettre √† jour l'affichage
        function updateDisplay() {
            const handsContainer = document.getElementById('hands-container');
            const splitButton = document.getElementById('split-button');
            const splitControls = document.getElementById('split-controls');
            const deckCount = document.getElementById('deck-count');
            
            // Afficher le nombre de cartes restantes
            deckCount.textContent = gameState.deck.length;
            
            // Vider le conteneur des mains
            handsContainer.innerHTML = '';
            
            if (gameState.isSplit && gameState.hands.length === 2) {
                // Mode Split - Afficher les deux mains c√¥te √† c√¥te
                handsContainer.className = 'hands-row';
                
                // Main gauche
                const leftHandDiv = document.createElement('div');
                leftHandDiv.className = 'hand split-left';
                leftHandDiv.innerHTML = `
                    <h3>üëà Main Gauche</h3>
                    <div class="cards">
                        ${gameState.hands[0].map(card => `<span class="card">${card.display}</span>`).join('')}
                    </div>
                    <p style="color: #4ade80; margin-top: 10px;">Cartes: ${gameState.hands[0].length}</p>
                `;
                
                // Main droite
                const rightHandDiv = document.createElement('div');
                rightHandDiv.className = 'hand split-right';
                rightHandDiv.innerHTML = `
                    <h3>üëâ Main Droite</h3>
                    <div class="cards">
                        ${gameState.hands[1].map(card => `<span class="card">${card.display}</span>`).join('')}
                    </div>
                    <p style="color: #4ade80; margin-top: 10px;">Cartes: ${gameState.hands[1].length}</p>
                `;
                
                handsContainer.appendChild(leftHandDiv);
                handsContainer.appendChild(rightHandDiv);
                
                // Afficher les contr√¥les de split
                splitControls.style.display = 'block';
                splitButton.style.display = 'none';
                
                // Mettre √† jour l'√©tat des boutons de pioche
                const hitLeftBtn = document.getElementById('hit-left');
                const hitRightBtn = document.getElementById('hit-right');
                
                hitLeftBtn.disabled = gameState.deck.length === 0;
                hitRightBtn.disabled = gameState.deck.length === 0;
                
            } else {
                // Mode normal - Une seule main
                handsContainer.className = 'single-hand';
                
                const hand = gameState.hands[0];
                const handDiv = document.createElement('div');
                handDiv.className = 'hand';
                
                const handTitle = document.createElement('h3');
                handTitle.textContent = 'üÉè Votre Main';
                handDiv.appendChild(handTitle);
                
                const cardsDiv = document.createElement('div');
                cardsDiv.className = 'cards';
                hand.forEach(card => {
                    const cardSpan = document.createElement('span');
                    cardSpan.className = 'card';
                    cardSpan.textContent = card.display;
                    cardsDiv.appendChild(cardSpan);
                });
                handDiv.appendChild(cardsDiv);
                
                // Afficher si cette main peut √™tre split
                const canSplitText = document.createElement('p');
                canSplitText.textContent = canSplit(hand) ? '‚úÖ Peut √™tre split' : '‚ùå Ne peut pas √™tre split';
                canSplitText.style.color = canSplit(hand) ? '#4ade80' : '#f87171';
                canSplitText.style.marginTop = '10px';
                handDiv.appendChild(canSplitText);
                
                handsContainer.appendChild(handDiv);
                
                // Masquer les contr√¥les de split
                splitControls.style.display = 'none';
                splitButton.style.display = 'inline-block';
                
                // Activer/d√©sactiver le bouton Split
                const canSplitSelected = canSplit(hand) && gameState.deck.length >= 2;
                splitButton.disabled = !canSplitSelected;
                splitButton.textContent = canSplitSelected ? 'üîÄ SPLIT' : 'üîÄ SPLIT (Non disponible)';
            }
        }

        // Initialisation du jeu
        function initGame() {
            gameState.deck = createDeck();
            dealNewHand();
        }

        // D√©marrer le jeu quand la page est charg√©e
        window.onload = initGame;
    </script>
</body>
</html>